name: Build plugin zip

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  build-zip:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Upload plugin artifact (single zip)
        uses: actions/upload-artifact@v4
        with:
          name: lean-stats
          path: |
            ./
            !.git/**
            !.github/**
            !node_modules/**
            !tests/**
            !docs/**
            !scripts/**
            !src/**
            !package.json
            !package-lock.json
            !webpack.config.js
            !phpcs.xml
            !phpunit.xml.dist
            !AGENTS.md
